import{aq as O,d as h,g as C,H as o,ar as T,x,as as $,h as b,j,O as k,a2 as E,aa as z,a3 as L,T as W,L as P}from"./framework.bacb2b36.js";function w(e){const t=`er-${e}`;return[t,(...l)=>{const s=[];return l&&l.forEach(c=>{if(c)return/^__/.test(c)?s.push(`${t}${c}`):s.push(`${t}--${c}`)}),s.join(" ")}]}function H(e){return typeof e=="number"||/^\d+(\.\d+)?$/.test(e)}function I(e){const t=O(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}function V(e,t){const n={...e};return t.forEach(l=>delete n[l]),n}const[K,R]=w("icon"),Y={name:{type:String,default:""},size:{type:[Number,String],default:"1em"},color:{type:String,default:""}},q=h({name:"ErIcon",props:Y,setup(e){return()=>{const t=C(()=>({fontSize:H(e.size)?`${e.size}px`:e.size,color:e.color||void 0}));return o("i",{class:[K,R(e.name)],style:t.value},null)}}}),p=q,A={type:{type:String,default:"default"},size:{type:String,default:"middle"},round:Boolean,disabled:Boolean,icon:String,circle:Boolean},[D,v]=w("button"),M=h({name:"ErButton",props:A,setup(e,{slots:t}){return()=>{var n;return o("button",{class:[D,"ellipsis",v(e.size,e.type),e.round?"is-round":void 0,e.circle?"is-circle":void 0,e.disabled?v("disabled"):void 0],disabled:e.disabled},[e.icon&&o(p,{name:e.icon,class:v("icon")},null),(n=t.default)==null?void 0:n.call(t)])}}}),g=M;let m;const N=()=>typeof window<"u";function U(){var e;if(!N())return 0;if(m!==void 0)return m;const t=document.createElement("div");t.className="er-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const s=l.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),m=n-s,m}const F=e=>{const t="er-overflow-hidden";if(!T(e))throw new Error('useLockScroll: "trigger" must be a ref');if(!N()||document.body.classList.contains(t))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{document.body.classList.remove(t),l&&document&&(document.body.style.width=s)},200)};x(e,u=>{var i;if(!u){c();return}l=!document.body.classList.contains(t),l&&(s=document.body.style.width),n=U();const d=document.documentElement.clientHeight<document.body.scrollHeight,r=(i=document.defaultView)==null?void 0:i.getComputedStyle(document.body).overflowY;n>0&&(d||r==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),document.body.classList.add(t)}),$(()=>c())};function G(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!L(e)}const[J,f]=w("confirm"),Q={visible:Boolean,title:{type:String,default:""},message:{type:String,default:""},cancelText:{type:String,default:"Cancel"},submitText:{type:String,default:"OK"},teleport:{type:[String,Object],default:"body"},lockScroll:{type:Boolean,default:!0}},X=h({name:"ErConfirm",props:Q,emits:["update:visible"],setup(e,{emit:t}){const n=b(!1),l=b(!1),s=b(null);x(()=>e.visible,a=>{a?u():c()}),j(()=>{e.visible&&u()});const c=()=>{l.value=!1,k(()=>{n.value=!1})},u=()=>{n.value=!0,setTimeout(()=>{l.value=!0},0)};E(s,()=>{t("update:visible",!1,"cancel")});const i=()=>{t("update:visible",!1,"cancel")},d=()=>{t("update:visible",!1,"submit")};e.lockScroll&&F(l);const r=()=>o(W,{name:"popper"},{default:()=>[n.value?o("div",{class:["er-popper",J]},[o("div",{class:[f("__wrapper"),l.value?"active":""],ref:s},[o("div",{class:f("__header")},[o("h3",null,[e.title]),o(p,{name:"close",color:"#666",onClick:i},null)]),o("div",{class:f("__body")},[o(p,{name:"warn"},null),o("p",null,[e.message])]),o("div",{class:f("__footer")},[o(g,{onClick:i},{default:()=>[e.cancelText]}),o(g,{type:"primary",onClick:d},{default:()=>[e.submitText]})])])]):null]});return()=>{let a;return e.teleport?o(z,{to:e.teleport},G(a=r())?a:{default:()=>[a]}):r()}}}),B={title:"",message:"",cancelText:"Cancel",submitText:"OK",teleport:"body",lockScroll:!0};let y;const Z=()=>{({instance:y}=I({setup(e,{expose:t}){const n=b({...B,visible:!1}),l=i=>{Object.assign(n.value,i,{visible:!0})},s=(i,d)=>{var r,a,S,_;d==="cancel"&&((a=(r=n.value).cancel)==null||a.call(r)),d==="submit"&&((_=(S=n.value).submit)==null||_.call(S)),n.value.visible=i};t({open:l});const u=C(()=>V(n.value,["submit","cancel"]));return()=>o(X,P(u.value,{"onUpdate:visible":s}),null)}}))},te=e=>new Promise((t,n)=>{y||Z(),y.open({...Object.assign(B,e),submit:()=>{e.submit&&e.submit(),t("submit")},cancel:()=>{e.cancel&&e.cancel(),n("cancel")}})});export{g as B,p as I,X as _,w as c,te as s};
