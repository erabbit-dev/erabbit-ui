import{ar as $,d as h,g as B,H as o,as as k,x as N,at as j,h as v,j as E,O as z,a3 as L,ab as W,a4 as I,T as P,L as H}from"./framework.13bdd8d6.js";function V(e){return typeof e=="number"||/^\d+(\.\d+)?$/.test(e)}function K(e){const t=$(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}function M(e,t){const n={...e};return t.forEach(l=>delete n[l]),n}function g(e){const t=`er-${e}`;return[t,(...l)=>{const s=[];return l&&l.forEach(c=>{if(c)return/^__/.test(c)?s.push(`${t}${c}`):s.push(`${t}--${c}`)}),s.join(" ")}]}const[S,C]=g("icon"),R={name:{type:String,default:""},size:{type:[Number,String],default:"1em"},color:{type:String,default:""}},Y=h({name:"ErIcon",props:R,setup(e){return()=>{const t=B(()=>({fontSize:V(e.size)?`${e.size}px`:e.size,color:e.color||void 0}));return e.name==="loading"?o("div",{class:[S,C(e.name)],style:t.value},[o("svg",{viewBox:"0 0 1024 1024",focusable:"false",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[o("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"},null)])]):o("i",{class:[S,C(e.name)],style:t.value},null)}}}),y=Y,A={type:{type:String,default:"default"},size:{type:String,default:"middle"},round:Boolean,disabled:Boolean,icon:String,circle:Boolean,loading:Boolean},[D,m]=g("button"),U=h({name:"ErButton",props:A,emit:["click"],setup(e,{slots:t}){const n=()=>{var s;const c=(s=t.default)==null?void 0:s.call(t);if(c)return o("span",{class:m("__text"),style:e.icon||e.loading?{paddingLeft:"5px"}:void 0},[c])},l=()=>{if(e.loading)return o(y,{name:"loading",class:m("__icon")},null);if(e.icon)return o(y,{name:e.icon,class:m("__icon")},null)};return()=>o("button",{class:[D,"ellipsis",m(e.size,e.type),e.round?"is-round":void 0,e.circle?"is-circle":void 0,e.disabled?m("disabled"):void 0,e.loading?m("loading"):void 0],disabled:e.disabled||e.loading},[l(),n()])}}),x=U;let f;const O=()=>typeof window<"u";function q(){var e;if(!O())return 0;if(f!==void 0)return f;const t=document.createElement("div");t.className="er-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const s=l.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),f=n-s,f}const F=e=>{const t="er-overflow-hidden";if(!k(e))throw new Error('useLockScroll: "trigger" must be a ref');if(!O()||document.body.classList.contains(t))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{document.body.classList.remove(t),l&&document&&(document.body.style.width=s)},200)};N(e,u=>{var i;if(!u){c();return}l=!document.body.classList.contains(t),l&&(s=document.body.style.width),n=q();const d=document.documentElement.clientHeight<document.body.scrollHeight,r=(i=document.defaultView)==null?void 0:i.getComputedStyle(document.body).overflowY;n>0&&(d||r==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),document.body.classList.add(t)}),j(()=>c())};function G(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!I(e)}const[J,b]=g("confirm"),Q={visible:Boolean,title:{type:String,default:""},message:{type:String,default:""},cancelText:{type:String,default:"Cancel"},submitText:{type:String,default:"OK"},teleport:{type:[String,Object],default:"body"},lockScroll:{type:Boolean,default:!0}},X=h({name:"ErConfirm",props:Q,emits:["update:visible"],setup(e,{emit:t}){const n=v(!1),l=v(!1),s=v(null);N(()=>e.visible,a=>{a?u():c()}),E(()=>{e.visible&&u()});const c=()=>{l.value=!1,z(()=>{n.value=!1})},u=()=>{n.value=!0,setTimeout(()=>{l.value=!0},0)};L(s,()=>{t("update:visible",!1,"cancel")});const i=()=>{t("update:visible",!1,"cancel")},d=()=>{t("update:visible",!1,"submit")};e.lockScroll&&F(l);const r=()=>o(P,{name:"popper"},{default:()=>[n.value?o("div",{class:["er-popper",J]},[o("div",{class:[b("__wrapper"),l.value?"active":""],ref:s},[o("div",{class:b("__header")},[o("h3",null,[e.title]),o(y,{name:"close",color:"#666",onClick:i},null)]),o("div",{class:b("__body")},[o(y,{name:"warn"},null),o("p",null,[e.message])]),o("div",{class:b("__footer")},[o(x,{onClick:i},{default:()=>[e.cancelText]}),o(x,{type:"primary",onClick:d},{default:()=>[e.submitText]})])])]):null]});return()=>{let a;return e.teleport?o(W,{to:e.teleport},G(a=r())?a:{default:()=>[a]}):r()}}}),T={title:"",message:"",cancelText:"Cancel",submitText:"OK",teleport:"body",lockScroll:!0};let p;const Z=()=>{({instance:p}=K({setup(e,{expose:t}){const n=v({...T,visible:!1}),l=i=>{Object.assign(n.value,i,{visible:!0})},s=(i,d)=>{var r,a,_,w;d==="cancel"&&((a=(r=n.value).cancel)==null||a.call(r)),d==="submit"&&((w=(_=n.value).submit)==null||w.call(_)),n.value.visible=i};t({open:l});const u=B(()=>M(n.value,["submit","cancel"]));return()=>o(X,H(u.value,{"onUpdate:visible":s}),null)}}))},te=e=>new Promise((t,n)=>{p||Z(),p.open({...Object.assign(T,e),submit:()=>{e.submit&&e.submit(),t("submit")},cancel:()=>{e.cancel&&e.cancel(),n("cancel")}})});export{x as B,y as I,X as _,g as c,M as o,te as s};
